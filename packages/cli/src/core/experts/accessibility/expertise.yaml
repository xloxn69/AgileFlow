domain: accessibility
last_updated: 2025-12-21
version: 1.1

files:
  components:
    - path: src/components/
      purpose: UI components to audit
    - path: src/components/ui/
      purpose: Base UI components (buttons, inputs, etc.)

  config:
    - path: .axerc
      purpose: Axe accessibility config
    - path: jest.config.js
      purpose: Jest with jest-axe setup

  docs:
    - path: docs/accessibility/
      purpose: Accessibility documentation
    - path: ACCESSIBILITY.md
      purpose: Accessibility statement

  cli:
    - path: packages/cli/src/core/
      purpose: CLI commands and agents (primary accessibility focus for AgileFlow)
    - path: packages/cli/tools/
      purpose: CLI tools and installers

relationships:
  - component_type: form
    requirements: [labels, error_messages, focus_management]
    aria: [aria-describedby, aria-invalid, aria-required]
  - component_type: modal
    requirements: [focus_trap, escape_close, aria-modal]
    aria: [role=dialog, aria-labelledby]
  - component_type: navigation
    requirements: [keyboard_nav, skip_links, landmarks]
    aria: [role=navigation, aria-current]
  - component_type: cli_prompt
    requirements: [clear_instructions, keyboard_only, error_feedback]
    libraries: [inquirer, chalk, ora]

patterns:
  - name: Focus Management
    description: "Manage focus for SPAs and modals"
    implementation: "Focus first focusable on open, restore on close"
  - name: Keyboard Navigation
    description: "All interactive elements keyboard accessible"
    implementation: "Tab, Enter, Space, Escape, Arrow keys"
  - name: Screen Reader Labels
    description: "All elements have accessible names"
    implementation: "aria-label, aria-labelledby, visible text"
  - name: Color Contrast
    description: "4.5:1 for text, 3:1 for large text"
    implementation: "Use contrast checker tools"
  - name: CLI Semantic Colors
    description: "Terminal colors convey meaning consistently"
    implementation: "Green=success, Red=error, Yellow=warning, Cyan=info, no color-only indicators"
  - name: CLI Progress Feedback
    description: "Visual feedback for long-running operations"
    implementation: "Ora spinners with descriptive text, percentage indicators where applicable"
  - name: CLI Error Messages
    description: "Clear, actionable error messages"
    implementation: "Context + problem + solution, colored output with chalk, exit codes for automation"

conventions:
  - "WCAG 2.1 AA minimum, AAA preferred"
  - "Test with screen readers (NVDA, VoiceOver)"
  - "All images have alt text"
  - "Form inputs have associated labels"
  - "Color never sole indicator of meaning"
  - "Motion respects prefers-reduced-motion"
  - "Skip links for keyboard users"
  - "CLI: Always provide text with colored output (never color-only)"
  - "CLI: All prompts keyboard-navigable (arrow keys, tab, enter)"
  - "CLI: Error messages include context and next steps"
  - "CLI: Progress indicators have descriptive text"

wcag_checklist:
  perceivable:
    - "1.1.1 Non-text Content (A)"
    - "1.3.1 Info and Relationships (A)"
    - "1.4.3 Contrast Minimum (AA)"
    - "1.4.11 Non-text Contrast (AA)"
  operable:
    - "2.1.1 Keyboard (A)"
    - "2.1.2 No Keyboard Trap (A)"
    - "2.4.1 Bypass Blocks (A)"
    - "2.4.7 Focus Visible (AA)"
  understandable:
    - "3.1.1 Language of Page (A)"
    - "3.2.1 On Focus (A)"
    - "3.3.1 Error Identification (A)"
  robust:
    - "4.1.1 Parsing (A)"
    - "4.1.2 Name, Role, Value (A)"

learnings:
  - date: 2025-12-21
    context: "AgileFlow CLI accessibility patterns"
    insight: "AgileFlow is a CLI tool, not a web application. Accessibility focuses on terminal UX: clear error messages with semantic colors (chalk), keyboard-friendly prompts (inquirer), progress indicators (ora spinners), and consistent color conventions (green=success, red=error, yellow=warning)."
    impact: "Shifted accessibility focus from WCAG web patterns to CLI usability patterns. All user-facing output should be screen-reader friendly by always pairing colors with descriptive text."
  - date: 2025-12-21
    context: "CLI semantic color system"
    insight: "Terminal colors must never be the sole indicator of meaning. Always include descriptive text alongside colored output. Example: 'âœ“ Success: Installation complete' (green) vs just green checkmark."
    impact: "Ensures CLI output is accessible to users with color blindness or screen readers. All installers (ui.js, docs-setup.js) follow this pattern."
  - date: 2025-12-21
    context: "Interactive prompts accessibility"
    insight: "All CLI prompts use inquirer library which provides built-in keyboard navigation (arrow keys, tab, enter, escape). Prompts always include clear instructions and validation error messages."
    impact: "Users can navigate all AgileFlow prompts without mouse. Validation errors are actionable and specific (e.g., 'Please enter a valid directory path' vs 'Invalid input')."
  - date: 2025-12-21
    context: "Long-running operation feedback"
    insight: "AgileFlow uses ora spinners for operations >1 second. Spinners always have descriptive text explaining current action (e.g., 'Installing dependencies...' not just spinner). Completion shows success/failure with clear messaging."
    impact: "Users always know what's happening during installs, setups, and file operations. No silent failures or mysterious waiting periods. Screen readers can announce status changes."
