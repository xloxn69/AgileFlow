domain: performance
last_updated: 2025-12-16
version: 1.0

files:
  benchmarks:
    - path: benchmarks/
      purpose: Performance benchmark files
    - path: tests/performance/
      purpose: Performance tests

  profiling:
    - path: .clinic/
      purpose: Node.js profiling output
    - path: profiles/
      purpose: CPU/memory profiles

  config:
    - path: lighthouse.config.js
      purpose: Lighthouse performance config
    - path: webpack.config.js
      purpose: Bundle optimization config

relationships:
  - metric_type: api_response_time
    target: "<200ms p95"
    measurement: "Load testing, APM"
  - metric_type: page_load
    target: "<3s LCP"
    measurement: "Lighthouse, Core Web Vitals"
  - metric_type: bundle_size
    target: "<250KB gzipped"
    measurement: "Webpack analyzer"
  - metric_type: database_query
    target: "<50ms p95"
    measurement: "Query profiling"

patterns:
  - name: N+1 Query Fix
    description: "Batch queries instead of loop"
    detection: "Multiple similar queries in sequence"
  - name: Caching Layer
    description: "Cache expensive computations"
    types: [memory, redis, cdn]
  - name: Lazy Loading
    description: "Load resources on demand"
    applies_to: [images, modules, routes]
  - name: Database Indexing
    description: "Add indexes for slow queries"
    detection: "EXPLAIN shows table scan"

conventions:
  - "Profile before optimizing (no premature optimization)"
  - "Measure before and after every change"
  - "Set performance budgets in CI"
  - "Document performance trade-offs"
  - "Monitor production performance continuously"
  - "Alert on performance regressions"

bottlenecks:
  common:
    - "Unindexed database queries"
    - "N+1 query patterns"
    - "Large bundle sizes"
    - "Unoptimized images"
    - "Missing caching"
    - "Synchronous operations"

learnings: []  # AUTO-UPDATED by self-improve
