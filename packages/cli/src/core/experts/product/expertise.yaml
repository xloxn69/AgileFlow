# Product Expert - Domain Knowledge
# This file is the agent's "mental model" of the product domain
# AUTO-UPDATED by self-improve.md after completing work

domain: product
last_updated: 2025-12-21
version: 1.1

# AgileFlow-specific product management patterns (learned from actual codebase)
files:
  requirements:
    - path: docs/05-epics/
      purpose: "Epic definitions with goals and success metrics"
      conventions: "EP-#### naming (e.g., EP-0001)"
      example: "ep-0001-agent-expert-pilot.md"
      sections:
        - "Goal"
        - "Problem Statement"
        - "Solution"
        - "Success Criteria"
        - "Stories table"
        - "Architecture Context"
        - "Dependencies"
        - "Risks"
        - "Exit Criteria"
    - path: docs/06-stories/
      purpose: "User stories organized by epic"
      conventions: "US-#### naming, Given/When/Then AC"
    - path: docs/01-brainstorming/
      purpose: "Early ideas and feature sketches"
      conventions: "Informal, exploratory notes"

  documentation:
    - path: docs/08-project/roadmap.md
      purpose: "Product roadmap and priorities"
    - path: docs/08-project/backlog.md
      purpose: "Feature backlog"
    - path: CLAUDE.md
      purpose: "Project context and conventions (internal, gitignored)"
    - path: README.md
      purpose: "Public project overview and getting started"

  research:
    - path: docs/10-research/
      purpose: "Technical research to inform product decisions"
      naming: "YYYYMMDD-slug.md format"
      example_notes:
        - "20251216-agent-experts-self-improving-agents.md"

  coordination:
    - path: docs/09-agents/status.json
      purpose: "Single source of truth for story tracking"
      fields: ["owner", "status", "priority", "estimate", "depends_on", "test_status"]
    - path: docs/09-agents/bus/log.jsonl
      purpose: "Agent coordination messages"

relationships:
  - parent: epics
    child: stories
    type: contains
    notes: "Epics break down into 3-10 stories (EP-0001 had 6 stories)"
  - parent: research
    child: epics
    type: informs
    notes: "Research notes linked from epics (e.g., EP-0001 references research)"
  - parent: roadmap
    child: epics
    type: prioritizes
    notes: "Roadmap determines epic priorities"
  - parent: status_json
    child: stories
    type: tracks
    notes: "status.json is single source of truth for story state"

patterns:
  - name: User Story Format
    description: "As a [role], I want [action], so that [benefit]"
    location: docs/06-stories/
    example: "As a new user, I want to sign up with email, so that I can access my account"

  - name: Acceptance Criteria
    description: "Given/When/Then format for testable criteria"
    location: docs/06-stories/
    example: "Given a new user, When they submit signup, Then account is created"

  - name: Definition of Ready
    description: "Story has AC, test stub, no blockers, architecture context"
    location: docs/09-agents/status.json
    example: "status: ready"
    checklist:
      - "Acceptance Criteria written (Given/When/Then)"
      - "Architecture Context with source citations"
      - "Test stub at docs/07-testing/test-cases/<US_ID>.md"
      - "Dependencies resolved and documented"

  - name: Epic Story Table
    description: "Markdown table in epic with ID, Title, Owner, Status, Estimate"
    location: docs/05-epics/
    example: "| US-0001 | Expert Directory Structure | AG-DEVOPS | ready | 2h |"

  - name: Hour-Based Estimates
    description: "Stories estimated in hours not days"
    location: docs/05-epics/, docs/09-agents/status.json
    range: "2h-3h typical for a story"

  - name: Research-Informed Planning
    description: "Epics reference research notes with relative links"
    location: docs/05-epics/
    example: "See [Research](../10-research/20251216-agent-experts.md)"

conventions:
  - "User stories must have clear benefit (the 'so that' clause)"
  - "Acceptance criteria in Given/When/Then format"
  - "Include edge cases and error scenarios"
  - "Stories typically 2-3 hours (not days)"
  - "Link research notes to epics with relative paths"
  - "Document scope (in/out of feature) in epic"
  - "status.json is single source of truth for story tracking"
  - "Exit criteria checklist at bottom of epic"
  - "Test status tracked per story (passing/failing/not_run)"
  - "Agent owner assigned to each story (AG-UI, AG-API, AG-DEVOPS, etc.)"

# Learned from AgileFlow codebase exploration
learnings:
  - date: 2025-12-21
    context: "Analyzed EP-0001 epic structure"
    insight: "Epics include Goal, Problem Statement, Solution, Success Criteria, Stories table, Architecture Context, Dependencies, Risks, Exit Criteria"
    source: "docs/05-epics/ep-0001-agent-expert-pilot.md"

  - date: 2025-12-21
    context: "Analyzed story tracking workflow"
    insight: "Stories tracked in status.json with owner, status, priority, estimate, depends_on, test_status fields; 'done' status with test_status: passing"
    source: "docs/09-agents/status.json"

  - date: 2025-12-21
    context: "Analyzed research-to-epic flow"
    insight: "Research notes (docs/10-research/) inform epic planning; epics link to research with relative paths"
    source: "docs/05-epics/ep-0001-agent-expert-pilot.md"

  - date: 2025-12-21
    context: "Analyzed estimation patterns"
    insight: "Stories use hour-based estimates (2h, 3h) not day-based; EP-0001 had 6 stories totaling ~15 hours"
    source: "docs/05-epics/ep-0001-agent-expert-pilot.md"
