# Epic Planner Expert - Domain Knowledge
# This file is the agent's "mental model" of the epic planning domain
# AUTO-UPDATED by self-improve.md after completing work

domain: epic-planner
last_updated: 2025-12-21
version: 1.1

# AgileFlow-specific epic planning structure (learned from actual codebase)
files:
  epics:
    - path: docs/05-epics/
      purpose: "Epic definitions with goals and metrics"
      conventions: "EP-#### naming (e.g., EP-0001)"
      example: "ep-0001-agent-expert-pilot.md"
    - path: docs/00-meta/templates/epic-template.md
      purpose: "Epic template with sections: Goal, Problem Statement, Solution, Stories, etc."

  stories:
    - path: docs/06-stories/
      purpose: "User stories organized by epic subdirectory"
      conventions: "US-#### naming (e.g., US-0001)"
      subdirectory_pattern: "stories/<epic-id>/ for grouping"
    - path: docs/00-meta/templates/story-template.md
      purpose: "Story template with AC, test stub, estimates"

  testing:
    - path: docs/07-testing/test-cases/
      purpose: "Test case stubs per story"
      conventions: "One file per US-####"
    - path: docs/09-agents/status.json
      purpose: "Story test_status tracking (passing/failing/not_run)"

  research:
    - path: docs/10-research/
      purpose: "Technical research to inform planning"
      naming: "YYYYMMDD-slug.md format"
    - path: docs/03-decisions/
      purpose: "ADRs constraining architecture"
      naming: "adr-NNNN-title.md format"

  coordination:
    - path: docs/09-agents/status.json
      purpose: "Single source of truth for story tracking"
      fields: ["owner", "status", "priority", "estimate", "depends_on", "test_status"]
    - path: docs/09-agents/bus/log.jsonl
      purpose: "Agent coordination messages (append-only)"

relationships:
  - parent: epics
    child: stories
    type: decomposes_into
    notes: "Epics decompose into 3-10 stories; EP-0001 had 6 stories"
  - parent: stories
    child: test_cases
    type: has
    notes: "Each story has test case stub in docs/07-testing/"
  - parent: stories
    child: agents
    type: assigned_to
    notes: "Stories assigned via owner field in status.json"
  - parent: research
    child: epics
    type: informs
    notes: "Research notes link to epics (see EP-0001 referencing research)"

patterns:
  - name: INVEST Criteria
    description: "Independent, Negotiable, Valuable, Estimable, Small, Testable"
    location: N/A
    example: "Validate each story against INVEST"

  - name: Vertical Slices
    description: "Each story delivers user-visible value"
    location: docs/06-stories/
    example: "Full feature slice, not horizontal layers"

  - name: Story Table in Epic
    description: "Epic markdown includes story table with ID, Title, Owner, Status, Estimate"
    location: docs/05-epics/ep-0001-agent-expert-pilot.md
    example: "| US-0001 | Expert Directory Structure | AG-DEVOPS | ready | 2h |"

  - name: Story Status Flow
    description: "Stories progress: ready → in_progress → in_review → done"
    location: docs/09-agents/status.json
    example: "Update status field as work progresses"

  - name: Hour-Based Estimates
    description: "Stories estimated in hours (2h, 3h) not days"
    location: docs/05-epics/ep-0001-agent-expert-pilot.md
    example: "Total Estimate: ~15 hours"

conventions:
  - "Stories typically 2-3 hours (not days)"
  - "Status.json is single source of truth for story tracking"
  - "Test stub created with story in docs/07-testing/test-cases/"
  - "Dependencies listed in depends_on array in status.json"
  - "Stories assigned via owner field (AG-UI, AG-API, AG-DEVOPS, etc.)"
  - "Research notes referenced in epic with relative links"
  - "Exit criteria checklist at bottom of epic ([ ] checkboxes)"
  - "Epics have Problem Statement, Solution, Success Criteria sections"

agent_assignments:
  AG-UI:
    - "Frontend components"
    - "Styling and design systems"
    - "Accessibility"
    - "User interactions"
  AG-API:
    - "Backend endpoints"
    - "Business logic"
    - "Data models"
    - "Database access"
  AG-CI:
    - "Test infrastructure"
    - "CI/CD pipelines"
    - "Code quality tools"
  AG-DEVOPS:
    - "Deployment"
    - "Dependencies"
    - "Technical debt"
    - "Expert system infrastructure"

# Learned from AgileFlow codebase exploration
learnings:
  - date: 2025-12-21
    context: "Analyzed EP-0001 epic structure"
    insight: "Epics include Problem Statement, Solution, Success Criteria, Stories table, Architecture Context, Dependencies, Risks, Exit Criteria sections"
    source: "docs/05-epics/ep-0001-agent-expert-pilot.md"

  - date: 2025-12-21
    context: "Analyzed story tracking system"
    insight: "status.json tracks stories with owner, status, priority, estimate, depends_on, test_status fields; updated timestamp at root"
    source: "docs/09-agents/status.json"

  - date: 2025-12-21
    context: "Analyzed EP-0001 completion pattern"
    insight: "Epic with 6 stories, ~15 hours total; stories ranged 2h-3h each; all marked done with test_status: passing"
    source: "docs/05-epics/ep-0001-agent-expert-pilot.md, docs/09-agents/status.json"

  - date: 2025-12-21
    context: "Analyzed research integration"
    insight: "Epics reference research notes with relative links (../10-research/YYYYMMDD-slug.md)"
    source: "docs/05-epics/ep-0001-agent-expert-pilot.md"
