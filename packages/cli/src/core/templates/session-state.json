{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "description": "AgileFlow session state tracking",
  "schema_version": 3,
  "current_session": {
    "id": "sess-20251206-100000",
    "started_at": "2025-12-06T10:00:00Z",
    "baseline_verified": false,
    "initial_test_status": "not_run",
    "current_story": null,
    "active_agent": null,
    "thread_type": "base",
    "thread_complexity": "routine",
    "expected_duration_minutes": null
  },
  "_thread_type_enum": ["base", "parallel", "chained", "fusion", "big", "long"],
  "_thread_complexity_enum": ["trivial", "routine", "complex", "exploratory"],
  "active_command": {
    "_comment": "Tracks which command (babysit, etc.) is currently active for context preservation across compacts",
    "name": null,
    "activated_at": null,
    "state": {}
  },
  "last_session": {
    "id": null,
    "ended_at": null,
    "stories_completed": [],
    "final_test_status": "not_run",
    "commits": []
  },
  "session_history": [],
  "batch_loop": {
    "_comment": "State for batch pmap loop mode - iterative processing with quality gates",
    "enabled": false,
    "batch_id": null,
    "pattern": null,
    "action": null,
    "quality_gate": "tests",
    "current_item": null,
    "items": {},
    "summary": {
      "total": 0,
      "completed": 0,
      "in_progress": 0,
      "pending": 0,
      "failed": 0
    },
    "iteration": 0,
    "max_iterations": 50,
    "started_at": null,
    "completed_at": null,
    "stopped_reason": null,
    "last_failure": null
  },
  "_batch_item_status_enum": ["pending", "in_progress", "completed", "failed", "skipped"]
}
