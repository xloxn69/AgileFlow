sequenceDiagram
    participant User
    participant CLI as npx agileflow setup
    participant Injector as content-injector.js
    participant FS as File System

    User->>CLI: Run setup
    CLI->>FS: Read agents/*.md
    FS-->>CLI: Agent files
    CLI->>Injector: generateAgentList()
    Injector->>Injector: Parse YAML frontmatter
    Injector->>Injector: Sort alphabetically
    Injector-->>CLI: Formatted agent list

    CLI->>FS: Read commands/*.md
    FS-->>CLI: Command files
    CLI->>Injector: generateCommandList()
    Injector-->>CLI: Formatted command list

    CLI->>FS: Read babysit.md template
    FS-->>CLI: Template with placeholders
    CLI->>Injector: injectContent()
    Injector->>Injector: Replace AGENT_LIST
    Injector->>Injector: Replace COMMAND_LIST
    Injector-->>CLI: Processed content

    CLI->>FS: Write to .claude/commands/
    CLI-->>User: Installation complete
