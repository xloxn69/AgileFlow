flowchart TB
    subgraph Source["Source Files (packages/cli/src/core/)"]
        CMD["commands/*.md<br/>YAML frontmatter"]
        AGT["agents/*.md<br/>YAML frontmatter"]
    end

    subgraph Injector["Content Injector"]
        SCAN[Scan directories]
        PARSE[Parse YAML frontmatter]
        GEN[Generate formatted lists]
        INJECT[Replace placeholders]
    end

    subgraph Templates["Template Files"]
        TPL["babysit.md<br/>mentor.md<br/>etc."]
        PH1["COMMAND_LIST placeholder"]
        PH2["AGENT_LIST placeholder"]
    end

    subgraph Output["Installed Files"]
        OUT[".claude/commands/agileflow/<br/>babysit.md with injected content"]
    end

    CMD --> SCAN
    AGT --> SCAN
    SCAN --> PARSE
    PARSE --> GEN
    TPL --> INJECT
    GEN --> INJECT
    INJECT --> OUT
