flowchart TB
    subgraph Commands["Commands (28)"]
        C1[babysit]
        C2[board]
        C3[metrics]
        C4[...]
    end

    subgraph Agents["Agents (34)"]
        A1[mentor]
        A2[api]
        A3[ui]
        A4[...]
    end

    subgraph Script["obtain-context.js"]
        direction TB
        S1[Parse command name]
        S2[Register with PreCompact]
        S3[Gather context sections]
        S4[Output formatted summary]
    end

    subgraph Sources["Data Sources"]
        D1[Git status]
        D2[status.json]
        D3[session-state.json]
        D4[docs/ structure]
        D5[bus/log.jsonl]
        D6[research notes]
        D7[epic files]
    end

    Commands -->|"STEP 0"| Script
    Agents -->|"STEP 0"| Script
    Script --> Sources
    S2 -->|updates| D3
